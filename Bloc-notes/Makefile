# Makefile Serveur 8000 - Linux fuser
PORT=8000

GREEN=\033[0;32m
RED=\033[0;31m
YELLOW=\033[1;33m
NC=\033[0m

.PHONY: serve stop status help

# ğŸš€ Serveur Python 8000 + navigateur
serve:
	python3 -m http.server $(PORT) &
	sleep 2 && xdg-open http://localhost:$(PORT)/devoir.html

# ğŸ›‘ Ferme serveur
stop:
	fuser -k $(PORT)/tcp

# ğŸ“Š
status:
	@if fuser $(PORT)/tcp >/dev/null 2>&1; then \
		echo "$(GREEN)ğŸŸ¢ Serveur $(PORT) ACTIF$(NC)"; \
	else \
		echo "$(RED)ğŸ”´ Serveur $(PORT) ARRÃŠTÃ‰$(NC)"; \
	fi

convert:
	python3 convert_md.py

all: convert serve

# â“ Aide
help:
	@echo "$(GREEN)ğŸ“‹ Makefile Serveur 8000$(NC)"
	@echo "  $(GREEN)make serve$(NC)    ğŸš€ Lance serveur + ouvre navigateur"
	@echo "  $(GREEN)make stop$(NC)     ğŸ›‘ fuser -k 8000/tcp"
	@echo "  $(GREEN)make status$(NC)   ğŸ“Š VÃ©rifie Ã©tat"
	@echo "  $(GREEN)make convert$(NC)   convertie md"
	@echo "  $(GREEN)make help$(NC)     â“ Cette aide"
	@echo ""
	@echo "$(YELLOW)ğŸ’¡ Ctrl+C arrÃªte aussi le serveur$(NC)"
